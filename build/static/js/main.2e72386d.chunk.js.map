{"version":3,"sources":["pages/login/images/bg.jpg","api/index.js","api/ajax.js","utils/memoryUtils.js","pages/login/login.jsx","pages/admin/admin.jsx","app.js","index.js"],"names":["module","exports","reqLogin","username","password","url","data","method","Promise","resolve","reject","axios","get","params","post","then","response","catch","error","message","ajax","user","Item","Login","handleSubmit","event","preventDefault","props","form","validateFields","err","values","a","result","status","success","memoryUtils","history","replace","msg","console","log","this","validatePwd","rule","value","callback","length","test","getFieldDecorator","className","src","logo","alt","onSubmit","rules","required","whitespace","min","max","pattern","prefix","type","style","color","placeholder","validator","htmlType","Component","WrapLogin","create","Admin","_id","to","App","path","component","ReactDOM","render","document","getElementById"],"mappings":"uGAAAA,EAAOC,QAAU,IAA0B,gC,gWCEpC,IAAMC,EAAS,SAACC,EAASC,GAAV,OCCP,SAAcC,GAA0B,IAAtBC,EAAqB,uDAAhB,GAAGC,EAAa,uDAAN,MAC5C,OAAO,IAAIC,QAAQ,SAAUC,EAAQC,IAEnB,QAAXH,EACSI,IAAMC,IAAIP,EAAI,CAACQ,OAAOP,IAEtBK,IAAMG,KAAKT,EAAIC,IAEnBS,KAAK,SAAAC,GACTP,EAAQO,EAASV,QAClBW,MAAM,SAAAC,GACLC,EAAA,EAAQD,MAAM,4BAAQA,EAAMC,aDZGC,CAAK,SAAS,CAACjB,WAASC,YAAU,SEF9D,GACXiB,KAAK,ICOHC,EAAM,IAAKA,KAIXC,E,2MAEFC,aAAa,SAACC,GACVA,EAAMC,iBACN,EAAKC,MAAMC,KAAKC,eAAhB,sCACI,WAAMC,EAAIC,GAAV,mBAAAC,EAAA,wDACQF,EADR,uBAEe3B,EAAmB4B,EAAnB5B,SAASC,EAAU2B,EAAV3B,SAFxB,SAG4BF,EAASC,EAASC,GAH9C,OAI6B,KADf6B,EAHd,QAIoBC,QACNf,EAAA,EAAQgB,QAAQ,2BAAO,GACvBC,EAAYf,KAAKY,EAAO3B,KACxB,EAAKqB,MAAMU,QAAQC,QAAQ,MAE3BnB,EAAA,EAAQD,MAAMe,EAAOM,KATnC,sBAYSC,QAAQC,IAAI,4BAZrB,yCADJ,oCAAAC,KAAA,iB,EAoBJC,YAAY,SAACC,EAAKC,EAAMC,GAChBD,EAEKA,EAAME,OAAO,EAClBD,EAAS,2DACJD,EAAME,OAAO,GAClBD,EAAS,4DACH,kBAAkBE,KAAKH,GAG7BC,IAFAA,EAAS,wFANTA,EAAS,yC,wEAcb,IACOG,EADKP,KAAKf,MAAMC,KAChBqB,kBAEP,OACI,yBAAKC,UAAU,SACX,4BAAQA,UAAU,gBACd,yBAAKC,IAAKC,IAAMC,IAAI,SACpB,uFAEJ,6BAASH,UAAU,iBACf,wDACA,uBAAMI,SAAUZ,KAAKlB,aAAc0B,UAAU,cACzC,kBAAC5B,EAAD,KAEQ2B,EAAkB,WAAW,CACzBM,MAAM,CACF,CAACC,UAAS,EAAKC,YAAW,EAAKtC,QAAQ,8CACvC,CAACuC,IAAI,EAAEvC,QAAQ,qDACf,CAACwC,IAAI,GAAGxC,QAAQ,sDAChB,CAACyC,QAAQ,kBAAkBzC,QAAQ,4GAL3C8B,CAQI,uBAAOY,OAAQ,uBAAMC,KAAK,OAAOC,MAAO,CAACC,MAAM,qBAAuBC,YAAY,yBAK9F,kBAAC3C,EAAD,KAEQ2B,EAAkB,WAAW,CACzBL,KAAK,CACD,CAACsB,UAAUxB,KAAKwB,aAFxBjB,CAKI,uBACAY,OAAQ,uBAAMC,KAAK,OAAOC,MAAO,CAAEC,MAAO,qBAC1CF,KAAK,WACLG,YAAY,mBAMxB,kBAAC3C,EAAD,KACI,uBAAQwC,KAAK,UAAUK,SAAS,SAASjB,UAAU,qBAAnD,wB,GApFRkB,aAgGLC,EADC,IAAKC,QAAL,CAAc/C,GCpGTgD,E,iLAEb,IAAMlD,EAAKe,EAAYf,KACvB,OAAIA,EAAKmD,IAKL,6BACI,wDACA,sCAAYnD,EAAKlB,WANd,kBAAC,IAAD,CAAUsE,GAAG,e,GAJGL,aCCdM,E,iLAGnB,OACC,kBAAC,IAAD,KACC,kBAAC,IAAD,KACC,kBAAC,IAAD,CAAOC,KAAK,IAAIC,UAAWrD,IAC3B,kBAAC,IAAD,CAAOoD,KAAK,SAASC,UAAWL,U,GAPJH,aCDjCS,IAASC,OAAO,kBAAC,EAAD,MAAQC,SAASC,eAAe,W","file":"static/js/main.2e72386d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/bg.429bff89.jpg\";","import ajax from './ajax'\r\n\r\nexport const reqLogin=(username,password)=>ajax('/login',{username,password},'POST')\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import axios from 'axios'\r\nimport {message} from 'antd'\r\n\r\nexport default function ajax(url,data={},method='GET'){\r\n    return new Promise(function (resolve,reject) {\r\n        let promise\r\n        if(method === 'GET'){\r\n            promise=axios.get(url,{params:data})\r\n        }else{\r\n            promise=axios.post(url,data)\r\n        }\r\n        promise.then(response=>{\r\n            resolve(response.data)\r\n        }).catch(error=>{\r\n            message.error('请求错误:'+error.message)\r\n        })\r\n    })\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","export default {\r\n    user:{}\r\n}\r\n\r\n\r\n\r\n","import React,{Component} from 'react'\r\nimport './login.less'\r\nimport { Form, Icon, Input, Button, message } from 'antd';\r\nimport logo from './images/bg.jpg'\r\nimport {reqLogin} from \"../../api\"\r\nimport memoryUtils from \"../../utils/memoryUtils\"\r\n\r\n\r\nconst Item =Form.Item\r\n\r\n/*登录路由组件*/\r\n\r\nclass Login extends Component {\r\n\r\n    handleSubmit=(event)=>{\r\n        event.preventDefault()\r\n        this.props.form.validateFields(\r\n            async(err,values)=>{\r\n                if(!err){\r\n                    const {username,password}=values\r\n                    const result =await reqLogin(username,password)\r\n                      if(result.status===0){\r\n                          message.success('登录成功',2)\r\n                          memoryUtils.user=result.data\r\n                          this.props.history.replace('/')\r\n                      } else{\r\n                          message.error(result.msg)\r\n                      }\r\n                }else{\r\n                     console.log('校验失败')\r\n                }\r\n\r\n            }\r\n        )\r\n    }\r\n\r\n    validatePwd=(rule,value,callback)=>{\r\n        if(!value){\r\n            callback('密码必须输入')\r\n        }else if(value.length<4){\r\n            callback('密码长度不能小于4位')\r\n        }else if(value.length>12){\r\n            callback('密码长度不能大于12位')\r\n        }else if(!/^[a-zA-Z0-9_]+$/.test(value)){\r\n            callback('密码必须是英文数字下划线组成')\r\n        }else{\r\n            callback()\r\n        }\r\n    }\r\n\r\n\r\n    render(){\r\n        const form =this.props.form\r\n        const {getFieldDecorator} =form\r\n\r\n        return (\r\n            <div className='login'>\r\n                <header className='login-header'>\r\n                    <img src={logo} alt=\"logo\"/>\r\n                    <h1>React项目:后台管理系统</h1>\r\n                </header>\r\n                <section className='login-content'>\r\n                    <h3>用户登录</h3>\r\n                    <Form onSubmit={this.handleSubmit} className=\"login-form\">\r\n                        <Item>\r\n                            {\r\n                                getFieldDecorator('username',{\r\n                                    rules:[\r\n                                        {required:true,whitespace:true,message:'必须输入用户名'},\r\n                                        {min:4,message:'用户名必须大于4位'},\r\n                                        {max:12,message:'用户名必须小于12位'},\r\n                                        {pattern:/^[a-zA-Z0-9_]+$/,message:'用户名必须是英文、数字或下划线组成'}\r\n                                    ]\r\n                                })(\r\n                                    <Input prefix={<Icon type=\"user\" style={{color:'rgba(0,0,0,.25)'}}/>} placeholder='用户名'/>\r\n                                )\r\n                            }\r\n\r\n                        </Item>\r\n                        <Item>\r\n                            {\r\n                                getFieldDecorator('password',{\r\n                                    rule:[\r\n                                        {validator:this.validator}\r\n                                    ]\r\n                                })(\r\n                                    <Input\r\n                                    prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                                    type=\"password\"\r\n                                    placeholder=\"密码\"\r\n                                    />\r\n                                )\r\n                            }\r\n\r\n                        </Item>\r\n                        <Item>\r\n                            <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n                                登录\r\n                            </Button>\r\n                        </Item>\r\n                    </Form>\r\n                </section>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst WrapLogin=Form.create()(Login)\r\nexport default WrapLogin","import React,{Component} from 'react'\r\nimport {Redirect} from 'react-router-dom'\r\n\r\nimport memoryUtils from \"../../utils/memoryUtils\"\r\n\r\n/*后台管理的路由组件*/\r\n\r\nexport default class Admin extends Component {\r\n    render(){\r\n        const user=memoryUtils.user\r\n        if(!user._id){\r\n            return <Redirect to='/login'/>\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <h2>后台管理</h2>\r\n                <div>Hello {user.username}</div>\r\n            </div>\r\n        )\r\n    }\r\n}","/*根组件*/\r\nimport React,{Component} from 'react';\r\nimport {BrowserRouter,Route,Switch} from 'react-router-dom'\r\n\r\nimport Login from './pages/login/login'\r\nimport Admin from './pages/admin/admin'\r\n\r\n/*应用根组件*/\r\nexport default class App extends Component {\r\n\r\n\trender (){\r\n\t\treturn (\r\n\t\t\t<BrowserRouter>\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route path='/' component={Login}></Route>\r\n\t\t\t\t\t<Route path='/admin' component={Admin}></Route>\r\n\t\t\t\t</Switch>\r\n\t\t\t</BrowserRouter>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n","/*入口js*/\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n//import 'antd/dist/antd.css' //全局引入样式\r\n\r\nimport App from './app'\r\n\r\nReactDOM.render(<App />,document.getElementById('root'));\r\n\r\n\r\n"],"sourceRoot":""}